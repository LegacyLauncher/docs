---
description: Создание портативного клиента игры
---

import RedirHost from "@site/src/components/RedirHost";

# Портативный клиент
:::tip[Пример портативного клиента]
Пример портативного клиента всегда доступен <RedirHost path="/portable">на нашем сайте</RedirHost>.
:::
:::note[Аргументы запуска лаунчера]
Для создания портативной сборки вам может потребоваться знание аргументов запуска лаунчера. Ознакомиться с ними можно в [соответствующей статье](./arguments)
:::

## Настройка портативности {#setup}
Портативный клиент позволяет запускать игру на любых компьютерах без лишних манипуляций.

Пути в конфигурационных файлах могут задаваться виде *абсолютных* или *относительных*. К использованию рекомендуются *относительные* пути.

### Настройка аргументов Bootstrap {#bootstrap}
Прежде чем приступить к настройке, нужно выбрать тип конфиграционного(-ых) файла(-ов).

| Имя файла                        | Описание                                                                                                                                                           |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `tl.bootargs`                    | Классический вариант конфигурационного файла. Одинаковые аргументы для всех операционных систем.                                                                   |
| `tl-<ОС>.bootargs`               | Продвинутый вариант конфигурационного файла. Разные аргументы для разных операциноных систем (`windows`, `linux`, `osx` (macOS)).                                  |
| `tl-<ОС>-<разрядность>.bootargs` | Продвинутый вариант конфигурационного файла. Разные аргументы для разных операционных систем (`windows`, `linux`, `osx` (macOS)) разной разрядности (`x64`, `x86`). |

```bash title="Пример файла tl.bootargs"
# Аргументы для самой Java
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=127.0.0.1:5005
-Dsun.java2d.uiScale=2

# Аргументы для Bootstrap, переданные как системные свойства
-Dtlauncher.bootstrap.targetJar=./launcher/bin/legacy.jar
-Dtlauncher.bootstrap.targetLibFolder=./launcher/libraries
```
:::warning[Обратите внимание!]
Старые версии лаунчера читали файл полностью и без учёта строк, деля аргументы по пробелам. Таким образом, в файле аргументов невозможно было пользоваться, собственно, символом пробела (например, в именах файлов и папок).

В более новых версиях бутстрапа (1.14.0) появилась поддержка нового формата: один аргумент - одна строчка.

При наличии больше 1 непустой строчки в файле, лаунчер будет читать аргументы, используя новый формат.
:::

### Настройка аргументов лаунчера {#launcher}
Прежде чем приступить к настройке, нужно выбрать тип конфиграционного(-ых) файла(-ов).

| Имя файла                    | Описание                                                                                                                                                           |
|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `tl.args`                    | Классический вариант конфигурационного файла. Одинаковые аргументы для всех операционных систем.                                                                   |
| `tl-<ОС>.args`               | Продвинутый вариант конфигурационного файла. Разные аргументы для разных операциноных систем (`windows`, `linux`, `osx` (macOS)).                                  |
| `tl-<ОС>-<разрядность>.args` | Продвинутый вариант конфигурационного файла. Разные аргументы для разных операционных систем (`windows`, `linux`, `osx` (macOS)) разной разрядности (`x64`, `x86`). |

```bash title="Пример файла tl.args"
--directory
./game

--settings
./launcher/config/legacy.properties
```
:::warning[Обратите внимание!]
Старые версии лаунчера читали файл полностью и без учёта строк, деля аргументы по пробелам. Таким образом, в файле аргументов невозможно было пользоваться, собственно, символом пробела (например, в именах файлов и папок).

В более новых версиях бутстрапа (1.14.0) появилась поддержка нового формата: один аргумент - одна строчка.

При наличии больше 1 непустой строчки в файле, лаунчер будет читать аргументы, используя новый формат.
:::

## Часто задаваемые вопросы {#faq}
### Могу ли я запустить лаунчер с аргументами из консоли? {#terminal}
Да, конечно. Параметры через консоль задаются следующим образом:
```bash
java <аргументы JVM и системные переменные для bootstrap> -cp LegacyLauncher.jar Bootstrap <аргументы бутстрапа/лаунчера> 
```

### Лаунчер не подхватывает аргументы! {#not-picking}
Во-первых, убедитесь, что все параметры аргументов введены правильно.  
Во-вторых, если Вы уверены что это не Ваша ошибка, а баг лаунчера - напишите нам об этом.
:::note[Обратите внимание!]
Особенность запуска приложений под Linux: текущей папкой может считаться папка пользователя (`~`, `$HOME`), а не папка приложения. Учитывайте это при создании портативных клиентов.
:::
